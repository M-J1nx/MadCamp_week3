{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mj183\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\MadCampWeek3\\\\MadCamp_week3_front\\\\src\\\\components\\\\Roll.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Memo from './Memo';\nimport './Memo.css';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport WriteMemo from './WriteMemo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Roll() {\n  _s();\n  const {\n    idx\n  } = useParams(); //이거가 인덱스(paperid 가져오는 거...)\n  const navigate = useNavigate();\n  const [lst, setlst] = useState([]);\n  const getlst = async () => {\n    const res = await (await axios.get(`http://43.202.79.6:3001/getpost?paperId=${idx}`)).data;\n    setlst(res);\n  };\n  useEffect(() => {\n    getlst();\n  });\n  const [nickname, setnickname] = useState(\"\");\n  useEffect(() => {\n    console.log(idx);\n    axios.get(`http://43.202.79.6:3001/getname?paperId=${idx}`).then(function (response) {\n      const {\n        userName\n      } = response.data[0];\n      console.log(userName);\n      setnickname(userName);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  const [ispopup, setispopup] = useState(false);\n  const [postData, setPostData] = useState('');\n  const handleGetData = async () => {\n    try {\n      const response = await axios.get(`http://43.202.79.6:3001/result?paperId=${idx}`);\n      const extractedBodies = response.data.map(item => item.body);\n      const finalBody = extractedBodies.join('\\n');\n      setPostData(finalBody);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n  /////////////////////////////////////////////////내용 부족하거나 이상하면 에러남. api 서버에서.\n  useEffect(() => {\n    if (postData != '') {\n      console.log(postData);\n      handlesum();\n    }\n  }, [postData]);\n  const handlesum = async () => {\n    try {\n      const response = await axios.post(\"http://43.202.79.6:3001/api\", {\n        result: postData\n      });\n      const jsonString = JSON.stringify(response.data.summary);\n      const finalresult = jsonString.slice(1, -1);\n      navigate(`/roll/${idx}/result`, {\n        state: {\n          rst: finalresult,\n          nick: nickname\n        }\n      });\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"roll\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"4.5%\",\n          textAlign: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginTop: 0\n          },\n          children: [nickname, \"\\uC758 \\uB864\\uB9C1\\uD398\\uC774\\uD37C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: \"10vw\",\n          marginRight: \"10vw\",\n          paddingRight: \"20px\"\n        },\n        className: \"wrapper grid\",\n        children: lst.map(post => /*#__PURE__*/_jsxDEV(Memo, {\n          postTitle: post.userName,\n          postDetail: post.body,\n          postId: post.postId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginBottom: \"20px\",\n            marginRight: \"10px\"\n          },\n          className: \"btn\",\n          onClick: () => {\n            handleGetData();\n          },\n          children: \"\\uACB0\\uACFC \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginBottom: \"20px\",\n            marginRight: \"10px\"\n          },\n          className: \"btn\",\n          onClick: () => {\n            setispopup(true);\n          },\n          children: \"\\uBA54\\uBAA8 \\uC4F0\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => {\n            window.location.href = \"/mainhome\";\n          },\n          children: \"\\uBA54\\uC778\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(WriteMemo, {\n          isOpen: ispopup,\n          onClose: () => setispopup(false),\n          paperId: idx\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 7\n  }, this);\n}\n_s(Roll, \"bHZuFMC0gNYiCLamKWTk00ZhiIU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Roll;\nvar _c;\n$RefreshReg$(_c, \"Roll\");","map":{"version":3,"names":["useState","useEffect","Memo","useParams","useNavigate","axios","WriteMemo","jsxDEV","_jsxDEV","Roll","_s","idx","navigate","lst","setlst","getlst","res","get","data","nickname","setnickname","console","log","then","response","userName","catch","error","ispopup","setispopup","postData","setPostData","handleGetData","extractedBodies","map","item","body","finalBody","join","handlesum","post","result","jsonString","JSON","stringify","summary","finalresult","slice","state","rst","nick","className","children","style","padding","textAlign","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","marginRight","paddingRight","postTitle","postDetail","postId","marginBottom","onClick","window","location","href","isOpen","onClose","paperId","_c","$RefreshReg$"],"sources":["C:/Users/mj183/OneDrive/바탕 화면/MadCampWeek3/MadCamp_week3_front/src/components/Roll.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Memo from './Memo';\r\nimport './Memo.css'\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport WriteMemo from './WriteMemo';\r\n\r\n\r\n\r\nexport default function Roll() {\r\n  const {idx} = useParams();//이거가 인덱스(paperid 가져오는 거...)\r\n  const navigate = useNavigate();\r\n  \r\n  const [lst, setlst] = useState([]);\r\n  const getlst = async () => {\r\n    const res = await (await axios.get(`http://43.202.79.6:3001/getpost?paperId=${idx}`)).data;\r\n    setlst(res)\r\n  }\r\n\r\n  useEffect(() => {\r\n    getlst();\r\n  });\r\n  \r\n  const [nickname, setnickname] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    console.log(idx)\r\n    axios.get(`http://43.202.79.6:3001/getname?paperId=${idx}`)\r\n    .then(function (response) {\r\n      const {userName} = response.data[0]\r\n      console.log(userName)\r\n      setnickname(userName)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error)\r\n    })  \r\n    },[]);\r\n\r\n  const [ispopup, setispopup] = useState(false)\r\n\r\n  const [postData, setPostData] = useState('');\r\n\r\n  const handleGetData = async () => {\r\n    try {\r\n      const response = await axios.get(`http://43.202.79.6:3001/result?paperId=${idx}`);\r\n      const extractedBodies = response.data.map(item => item.body);\r\n      const finalBody = extractedBodies.join('\\n');\r\n      \r\n      setPostData(finalBody);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    }\r\n  };\r\n/////////////////////////////////////////////////내용 부족하거나 이상하면 에러남. api 서버에서.\r\n  useEffect(()=>{\r\n    if (postData != ''){\r\n      console.log(postData)\r\n      handlesum()\r\n      \r\n      \r\n    }\r\n    \r\n  }, [postData])\r\n\r\n  const handlesum = async () => {\r\n    try {\r\n      const response = await axios.post(\"http://43.202.79.6:3001/api\", {result: postData})\r\n      const jsonString = JSON.stringify(response.data.summary);\r\n      const finalresult = jsonString.slice(1, -1);\r\n      \r\n      navigate(`/roll/${idx}/result`, {state: {rst: finalresult, nick: nickname}})\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    }\r\n  }\r\n\r\n\r\n    return (\r\n      <div className='roll'>\r\n        <div>\r\n          <div style={{padding: \"4.5%\", textAlign: \"center\"}}>\r\n            <h2 style={{marginTop: 0}}>{nickname}의 롤링페이퍼</h2>\r\n          </div>\r\n          <div style={{marginLeft: \"10vw\", marginRight: \"10vw\",paddingRight: \"20px\"}} className='wrapper grid'>\r\n            {lst.map((post)=>(\r\n            <Memo postTitle = {post.userName} postDetail = {post.body} postId = {post.postId} />\r\n            ))}\r\n          </div>\r\n\r\n          <div style={{textAlign: \"center\"}}>\r\n            <button style={{marginBottom: \"20px\", marginRight: \"10px\"}} className='btn' onClick={()=>{\r\n              handleGetData()\r\n              \r\n              \r\n            }}>결과 보기</button> {/* 이거가 요약 해주는 버튼... */}\r\n            <button style={{marginBottom: \"20px\", marginRight: \"10px\"}} className='btn' onClick={()=>{setispopup(true)}}>메모 쓰기</button>\r\n            <button className='btn' onClick={()=>{window.location.href=\"/mainhome\"}}>메인으로 돌아가기</button>\r\n            <WriteMemo isOpen={ispopup} onClose={()=>setispopup(false)} paperId={idx}/>\r\n            \r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}